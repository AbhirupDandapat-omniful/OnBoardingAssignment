version: "3.8"
services:
  zookeeper:
    image: bitnami/zookeeper:latest
    environment: { ALLOW_ANONYMOUS_LOGIN: "yes" }
  kafka:
    image: bitnami/kafka:latest
    depends_on: [zookeeper]
    environment:
      KAFKA_ZOOKEEPER_CONNECT: "zookeeper:2181"
      ALLOW_PLAINTEXT_LISTENER: "yes"
      KAFKA_CFG_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_CFG_LISTENERS: PLAINTEXT://:9092
    ports: ["9092:9092"]
  redis:
    image: redis:7
    ports: ["6379:6379"]
  mongo:
    image: mongo:6
    ports: ["27017:27017"]
  postgres:
    image: postgres:15
    environment: { POSTGRES_PASSWORD: password }
    ports: ["5432:5432"]
  localstack:
    image: localstack/localstack:latest
    environment:
      SERVICES: "s3,sqs"
      DEFAULT_REGION: us-east-1
      AWS_ACCESS_KEY_ID: test
      AWS_SECRET_ACCESS_KEY: test
    ports: ["4566:4566"]
